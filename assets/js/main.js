"use strict";function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var BrainsSellSpan=document.getElementsByClassName("brains-sell")[0],BrainSpans=document.getElementsByClassName("brains"),MoneySpans=document.getElementsByClassName("money"),Modals=document.getElementsByClassName("modal"),SettingsModal=document.getElementsByClassName("modal-settings")[0],ShopModal=document.getElementsByClassName("modal-shop")[0],Tabs=document.getElementsByClassName("tab"),DpcTab=document.getElementsByClassName("tab-dpc")[0],DpsTab=document.getElementsByClassName("tab-dps")[0],MultipliersTab=document.getElementsByClassName("tab-multipliers")[0],TabButtons=document.getElementsByClassName("tab-btn"),DpsTabButton=document.getElementsByClassName("tab-btn-dps")[0],DpcTabButton=document.getElementsByClassName("tab-btn-dpc")[0],MultipliersTabButton=document.getElementsByClassName("tab-btn-multipliers")[0],SellBrainsButton=document.getElementsByClassName("button-sellbrains")[0],SettingsButton=document.getElementsByClassName("button-settings")[0],ShopButton=document.getElementsByClassName("button-shop")[0],CloseModalButtons=document.getElementsByClassName("button-closemodal"),BuyShopItemButtons=document.getElementsByClassName("shop-item-button"),ShopItemLevels=document.getElementsByClassName("shop-item-level"),DamageIndicatorToggle=document.getElementsByClassName("settings-button-damageindicator")[0],SaveButton=document.getElementsByClassName("settings-button-save")[0],LoadButton=document.getElementsByClassName("settings-button-load")[0],ResetButton=document.getElementsByClassName("settings-button-reset")[0],HealthBarCurrent=document.getElementsByClassName("current-health")[0],VersionSpan=document.getElementById("version"),Zombie=document.getElementsByClassName("zombie")[0],ZombieHealthCurrent=document.getElementsByClassName("zombie-current-health")[0],ZombieHealthTotal=document.getElementsByClassName("zombie-total-health")[0],StatisticDPC=document.getElementById("statistics-dpc"),StatisticDPS=document.getElementById("statistics-dps"),StatisticKills=document.getElementById("statistics-kills"),StatisticClicks=document.getElementById("statistics-clicks"),StatisticLevel=document.getElementById("statistics-level"),StatisticBPK=document.getElementById("statistics-bpk"),StatisticMPB=document.getElementById("statistics-mpb"),TapZ=function TapZ(){var a=this;_classCallCheck(this,TapZ),_defineProperty(this,"addEventListeners",function(){Array.from(Modals).forEach(function(b){b.addEventListener("click",function(b){b.currentTarget!==b.target||a.toggleModal("")})}),Array.from(CloseModalButtons).forEach(function(b){return b.addEventListener("click",function(){return a.toggleModal("")})}),SellBrainsButton.addEventListener("click",function(){a.shop.sellBrains(),a.update()}),SettingsButton.addEventListener("click",function(){return a.toggleModal("settings")}),ShopButton.addEventListener("click",function(){return a.toggleModal("shop")}),DpcTabButton.addEventListener("click",function(){return a.toggleTab("dpc")}),DpsTabButton.addEventListener("click",function(){return a.toggleTab("dps")}),MultipliersTabButton.addEventListener("click",function(){return a.toggleTab("multipliers")}),DamageIndicatorToggle.addEventListener("click",function(){return a.editSettings("showDamage")}),SaveButton.addEventListener("click",function(){return a.saveData.save()}),LoadButton.addEventListener("click",function(){return a.saveData.load()}),ResetButton.addEventListener("click",function(){return a.saveData.reset()}),Zombie.addEventListener("click",a.click),Zombie.addEventListener("touchstart",a.multiTouch)}),_defineProperty(this,"multiTouch",function(b){b.preventDefault();var c=b.touches[b.touches.length-1],d=new MouseEvent("click",{clientX:c.clientX,clientY:c.clientY});a.click(d)}),_defineProperty(this,"click",function(b){a.saveData.userData.statistics.clicks=a.saveData.userData.statistics.clicks.plus(1),a.injureZombie(a.saveData.userData.dpc),a.saveData.userData.options.showDamage&&a.damageIndicator(b.x,b.y),a.update()}),_defineProperty(this,"damageIndicator",function(b,c){if(0!=b&&0!=c){var d=new Date().getTime(),e=document.createElement("span");e.innerHTML="-".concat(a.saveData.userData.dpc),e.id=d,e.classList.add("damage-indicator"),e.dataset.itter=10,e.dataset.uid=d,e.dataset.x=b,e.dataset.y=c,e.style.top="".concat(c-40,"px"),e.style.left="".concat(b+20,"px"),document.body.appendChild(e);var f=setInterval(function(){e.dataset.itter--,e.dataset.x=parseInt(e.dataset.x)+25,e.dataset.y=parseInt(e.dataset.y)-75,e.style.top="".concat(e.dataset.y,"px"),e.style.left="".concat(e.dataset.x,"px"),e.style.opacity=e.dataset.itter/10,0>=e.dataset.itter&&(clearInterval(f),null!=e&&e.parentNode.removeChild(e))},100)}}),_defineProperty(this,"editSettings",function(b,c){var d=a.saveData.userData.options[b];a.saveData.userData.options[b]="boolean"==typeof d?!d:c,a.update()}),_defineProperty(this,"handleDPS",function(){a.injureZombie(a.saveData.userData.dps),a.update()}),_defineProperty(this,"injureZombie",function(b){a.saveData.userData.zombie.currentHealth=a.saveData.userData.zombie.currentHealth.minus(b),a.saveData.userData.zombie.currentHealth.lte(0)&&a.killZombie(),b.gt(0)&&(Zombie.classList.add("zombie-hurt"),setTimeout(function(){return Zombie.classList.remove("zombie-hurt")},300))}),_defineProperty(this,"killZombie",function(){a.saveData.userData.statistics.kills=a.saveData.userData.statistics.kills.plus(1),a.saveData.userData.brains=a.saveData.userData.brains.plus(a.saveData.userData.bpk),a.saveData.userData.zombie.currentHealth=a.saveData.userData.zombie.totalHealth}),_defineProperty(this,"toggleModal",function(b){if(a.saveData.gameData.modalOpen)Array.from(Modals).forEach(function(a){return a.classList.remove("modal-visible")}),a.saveData.gameData.modalOpen=!1;else{switch(b){case"shop":ShopModal.classList.add("modal-visible");break;case"settings":SettingsModal.classList.add("modal-visible");break;case"":break;default:console.log("Error, unknown modal: ".concat(b));}a.saveData.gameData.modalOpen=!0}}),_defineProperty(this,"toggleTab",function(a){Array.from(TabButtons).forEach(function(a){return a.classList.remove("tab-btn-active")}),Array.from(Tabs).forEach(function(a){return a.classList.remove("tab-visible")});"dpc"===a?(DpcTabButton.classList.add("tab-btn-active"),DpcTab.classList.add("tab-visible")):"dps"===a?(DpsTabButton.classList.add("tab-btn-active"),DpsTab.classList.add("tab-visible")):"multipliers"===a?(MultipliersTabButton.classList.add("tab-btn-active"),MultipliersTab.classList.add("tab-visible")):console.log("Unknown Tab: ".concat(a))}),_defineProperty(this,"update",function(){a.updateHealth(),BrainsSellSpan.innerHTML="\xA3".concat(formatNumber(a.shop.sellBrainsCost(),!0)),Array.from(BrainSpans).forEach(function(b){return b.innerHTML="".concat(formatNumber(a.saveData.userData.brains,!0)," Brains")}),Array.from(MoneySpans).forEach(function(b){return b.innerHTML="\xA3".concat(formatNumber(a.saveData.userData.money,!0))}),DamageIndicatorToggle.innerText="Damage Indicators: ".concat(a.saveData.userData.options.showDamage?"ON":"OFF"),Array.from(BuyShopItemButtons).forEach(function(b){var c=a.shop.getItem(b.getAttribute("data-id"));b.innerText="Buy x1 ".concat(c.text.name," for \xA3").concat(formatNumber(a.shop.getItemCost(c),!0))}),Array.from(ShopItemLevels).forEach(function(b){b.innerText="Level: ".concat(a.saveData.userData.upgrades[b.getAttribute("data-id")].level)}),StatisticClicks.innerText=a.saveData.userData.statistics.clicks.toString(10),StatisticDPC.innerText=a.saveData.userData.dpc.toString(10),StatisticDPS.innerText=a.saveData.userData.dps.toString(10),StatisticKills.innerText=a.saveData.userData.statistics.kills.toString(10),StatisticLevel.innerText=0,StatisticBPK.innerText=a.saveData.userData.bpk.toString(10),StatisticMPB.innerText="\xA3".concat(a.saveData.userData.mpb.toString(10)),ZombieHealthCurrent.innerHTML=a.saveData.userData.zombie.currentHealth,ZombieHealthTotal.innerHTML=a.saveData.userData.zombie.totalHealth}),_defineProperty(this,"updateHealth",function(){var b=100*a.saveData.userData.zombie.currentHealth.dividedBy(a.saveData.userData.zombie.totalHealth);50<b?(HealthBarCurrent.classList.remove("health-amber","health-red"),HealthBarCurrent.classList.add("health-green")):25<b?(HealthBarCurrent.classList.remove("health-green","health-red"),HealthBarCurrent.classList.add("health-amber")):(HealthBarCurrent.classList.remove("health-green","health-amber"),HealthBarCurrent.classList.add("health-red")),HealthBarCurrent.style.width="".concat(b,"%")}),this.saveData=new Save,this.shop=new Shop(this.saveData,this.update),this.addEventListeners(),console.log("TapZ Incremental"),console.log("v".concat(this.saveData.gameData.version)),VersionSpan.innerText="v".concat(this.saveData.gameData.version),this.saveData.load(),this.update(),setInterval(function(){a.saveData.save()},1e4),setInterval(function(){a.handleDPS()},1e3)};window.onload=function(){return new TapZ};